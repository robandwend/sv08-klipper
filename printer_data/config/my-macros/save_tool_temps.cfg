[gcode_macro SAVE_TOOL_TEMPS]
variable_temp_tool0: 0.0
variable_temp_tool1: 0.0
variable_temp_tool2: 0.0
variable_temp_tool3: 0.0
gcode:
   {% set temp = printer['extruder'].target %}
   SET_GCODE_VARIABLE MACRO=SAVE_TOOL_TEMPS VARIABLE=temp_tool0 VALUE={temp}
   RESPOND TYPE='echo' MSG="Saved temperature T0 = {temp}"
   {% set temp = printer['extruder1'].temperature %}
   SET_GCODE_VARIABLE MACRO=SAVE_TOOL_TEMPS VARIABLE=temp_tool1 VALUE={temp}
   RESPOND TYPE='echo' MSG="Saved temperature T1 = {temp}"
   {% set temp = printer['extruder2'].temperature %}
   SET_GCODE_VARIABLE MACRO=SAVE_TOOL_TEMPS VARIABLE=temp_tool2 VALUE={temp}
   RESPOND TYPE='echo' MSG="Saved temperature T2 = {temp}"
   {% set temp = printer['extruder3'].temperature %}
   SET_GCODE_VARIABLE MACRO=SAVE_TOOL_TEMPS VARIABLE=temp_tool3 VALUE={temp}
   RESPOND TYPE='echo' MSG="Saved temperature T3 = {temp}"

[gcode_macro RESTORE_TOOL_TEMPS]
gcode:    
   {% set temp = printer["gcode_macro SAVE_TOOL_TEMPS"].temp_tool0 %}
   M104 S{temp} T0
   RESPOND TYPE='echo' MSG="Restoring T0 to {temp}째C"
   {% set temp = printer["gcode_macro SAVE_TOOL_TEMPS"].temp_tool1 %}
   M104 S{temp} T1
   RESPOND TYPE='echo' MSG="Restoring T1 to {temp}째C"
   {% set temp = printer["gcode_macro SAVE_TOOL_TEMPS"].temp_tool2 %}
   M104 S{temp} T2
   RESPOND TYPE='echo' MSG="Restoring T2 to {temp}째C"
   {% set temp = printer["gcode_macro SAVE_TOOL_TEMPS"].temp_tool3 %}
   M104 S{temp} T3
   RESPOND TYPE='echo' MSG="Restoring T3 to {temp}째C"

