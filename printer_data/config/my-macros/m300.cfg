[gcode_macro M300]
gcode:
# M300 S{pitch in hz} P{duration in ms}
  {% set S = params.S|default(2000)|int %} ; Frequency in Hz. Default 2kHz.
  {% set P = params.P|default(100)|int %} ; Duration/wait of each beep in ms. Default 100ms
  SET_PIN PIN=beeper VALUE=0.8 CYCLE_TIME={ 1.0/S if S > 0 else 1 } ; Turn on beeper sound
  G4 P{P} ; wait for duration
  SET_PIN PIN=beeper VALUE=0 ; Turn off beeper sound


